<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/pesanan.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    </head>
    <body>
        <div class="content" id="content">
            <form action="#" method="post" enctype="multipart/form-data">

                <!-- new add image button -->
                <div class="input_gambar">
                    <div id="imagePreview" src="http://via.placeholder.com/350x150" alt="placeholder image goes here"></div>
                    <input id="uploadFile" type="file" name="image" class="img" />
                </div>

                <!-- <label for="files" id="input_gambar"><p>Masukkan Gambar</p></label> -->

                <input type="file" id="files" name="foto_makanan" onchange="document.getElementById('blah').src = window.URL.createObjectURL(this.files[0])"><br>
                <label for="nama"><p>Nama Makanan:</p></label>
                <input type="text" id="nama" name="nama_makanan" maxlength="16"><br><br>
                <label for="harga"><p>Masukan Harga:</p></label>
                <input type="text" id="harga" name="harga"><br><br>
                <label for="judul"><p>Deskripsi:</p></label>
                <textarea name="deskripsi" id="deskripsi" cols="40" rows="10"></textarea><br><br>
                <img id="blah" width="100" height="100">
                <input type="submit" class="submit" name="submit">
                

            </form>
        </div>
        &ensp;&ensp;;
        <script>
            var dengan_rupiah = document.getElementById('harga');
            dengan_rupiah.addEventListener('keyup', function(e)
            {
                dengan_rupiah.value = formatRupiah(this.value, 'Rp. ');
            });
            
            /* Fungsi */
            function formatRupiah(angka, prefix)
            {
                var number_string = angka.replace(/[^,\d]/g, '').toString(),
                    split    = number_string.split(','),
                    sisa     = split[0].length % 3,
                    rupiah     = split[0].substr(0, sisa),
                    ribuan     = split[0].substr(sisa).match(/\d{3}/gi);
                    
                if (ribuan) {
                    separator = sisa ? '.' : '';
                    rupiah += separator + ribuan.join('.');
                }
                
                rupiah = split[1] != undefined ? rupiah + ',' + split[1] : rupiah;
                return prefix == undefined ? rupiah : (rupiah ? 'Rp. ' + rupiah : '');
            }

            // Fun for image preview in add image button
            $(function() {
            $("#uploadFile").on("change", function()
            {
                var files = !!this.files ? this.files : [];
                if (!files.length || !window.FileReader) return; // no file selected, or no FileReader support

                if (/^image/.test( files[0].type)){ // only image file
                    var reader = new FileReader(); // instance of the FileReader
                    reader.readAsDataURL(files[0]); // read the local file

                    reader.onloadend = function(){ // set image data as background of div
                        $("#imagePreview").css("background-image", "url("+this.result+")");
                    }
                }
            });
        });

        $('#imagePreview').click(function(){
        $('#uploadFile').click();
        });

        </script>
    </body>
</html>